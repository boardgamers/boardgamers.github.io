(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{373:function(t,a,s){"use strict";s.r(a);var e=s(25),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"game-engine-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#game-engine-api"}},[t._v("#")]),t._v(" Game engine API")]),t._v(" "),s("p",[t._v("Your game engine should be a NPM module and export a number of methods.")]),t._v(" "),s("p",[t._v("Most of the methods return "),s("code",[t._v("GameData")]),t._v(", the game state. You can alter the "),s("code",[t._v("GameData")]),t._v("\npassed in the argument and return, or return a whole new object.")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#required-methods"}},[t._v("Required methods")]),s("ul",[s("li",[s("a",{attrs:{href:"#init"}},[t._v("init")])]),s("li",[s("a",{attrs:{href:"#move"}},[t._v("move")])]),s("li",[s("a",{attrs:{href:"#ended"}},[t._v("ended")])]),s("li",[s("a",{attrs:{href:"#scores"}},[t._v("scores")])]),s("li",[s("a",{attrs:{href:"#dropplayer"}},[t._v("dropPlayer")])]),s("li",[s("a",{attrs:{href:"#currentplayer"}},[t._v("currentPlayer")])]),s("li",[s("a",{attrs:{href:"#loglength"}},[t._v("logLength")])]),s("li",[s("a",{attrs:{href:"#logslice"}},[t._v("logSlice")])])])]),s("li",[s("a",{attrs:{href:"#optional-methods"}},[t._v("Optional methods")]),s("ul",[s("li",[s("a",{attrs:{href:"#setplayermetadata"}},[t._v("setPlayerMetaData")])]),s("li",[s("a",{attrs:{href:"#setplayersettings"}},[t._v("setPlayerSettings")])]),s("li",[s("a",{attrs:{href:"#playersettings"}},[t._v("playerSettings")])]),s("li",[s("a",{attrs:{href:"#rankings"}},[t._v("rankings")])]),s("li",[s("a",{attrs:{href:"#round"}},[t._v("round")])]),s("li",[s("a",{attrs:{href:"#cancelled"}},[t._v("cancelled")])]),s("li",[s("a",{attrs:{href:"#factions"}},[t._v("factions")])]),s("li",[s("a",{attrs:{href:"#stripsecret"}},[t._v("stripSecret")])]),s("li",[s("a",{attrs:{href:"#tosave"}},[t._v("toSave")])]),s("li",[s("a",{attrs:{href:"#messages"}},[t._v("messages")])]),s("li",[s("a",{attrs:{href:"#replay"}},[t._v("replay")])]),s("li",[s("a",{attrs:{href:"#stats"}},[t._v("stats")])])])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"required-methods"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#required-methods"}},[t._v("#")]),t._v(" Required methods")]),t._v(" "),s("h3",{attrs:{id:"init"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#init"}},[t._v("#")]),t._v(" init")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("players"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" expansions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" seed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" creator"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("GameData"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("Creates the initial game data. The function can be asynchronous - if you need to make an API call to an external\ntool like a map generator, for example.")]),t._v(" "),s("p",[t._v("After initialization, the players are 0-indexed: a 4 player games will have players "),s("code",[t._v("0")]),t._v(", "),s("code",[t._v("1")]),t._v(", "),s("code",[t._v("2")]),t._v(" and "),s("code",[t._v("3")]),t._v(".")]),t._v(" "),s("p",[s("code",[t._v("creator")]),t._v(" is the index of the player that created the game. It can be "),s("code",[t._v("-1")]),t._v(" if the creator of the game is not a player.")]),t._v(" "),s("h4",{attrs:{id:"players"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#players"}},[t._v("#")]),t._v(" players")]),t._v(" "),s("p",[t._v("The number of players")]),t._v(" "),s("h4",{attrs:{id:"expansions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#expansions"}},[t._v("#")]),t._v(" expansions")]),t._v(" "),s("p",[t._v("The list of expansions activated")]),t._v(" "),s("h4",{attrs:{id:"options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#options"}},[t._v("#")]),t._v(" options")]),t._v(" "),s("p",[t._v("An object containing the options chosen for the game")]),t._v(" "),s("h4",{attrs:{id:"seed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#seed"}},[t._v("#")]),t._v(" seed")]),t._v(" "),s("p",[t._v("The random seed for the game. Games with the same seed should always produce the same random results (map generation, card shuffling, dice throws...).")]),t._v(" "),s("h3",{attrs:{id:"move"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#move"}},[t._v("#")]),t._v(" move")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("move")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" move"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" player"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData\n")])])]),s("p",[t._v("Execute a move by "),s("code",[t._v("player")]),t._v(".")]),t._v(" "),s("p",[t._v("Throw an error if the move is invalid.")]),t._v(" "),s("p",[t._v("Note that if you implement "),s("a",{attrs:{href:"#tosave"}},[t._v("toSave")]),t._v(" to not save the result, you can send the result to the UI without storing the modified game state in the database. It is useful when you want to allow the user to play around and only confirm at the very end.")]),t._v(" "),s("h3",{attrs:{id:"ended"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ended"}},[t._v("#")]),t._v(" ended")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ended")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),t._v("\n")])])]),s("p",[t._v("Returns whether or not the game is ended.")]),t._v(" "),s("h3",{attrs:{id:"scores"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scores"}},[t._v("#")]),t._v(" scores")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scores")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("Give the score of each player. The scores are displayed in the sidebar next to player games. They are also used to determine\nthe player ranking at the end for elo calculation, unless "),s("a",{attrs:{href:"#ranking"}},[t._v("ranking")]),t._v(" is implemented.")]),t._v(" "),s("h3",{attrs:{id:"dropplayer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dropplayer"}},[t._v("#")]),t._v(" dropPlayer")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dropPlayer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" player"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("GameData"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("Drop a player out.")]),t._v(" "),s("p",[t._v("You should either change the player to an AI or completely remove them from the game. If it is\nthe current player, the turn should automatically go to the next, non dropped-player.")]),t._v(" "),s("h3",{attrs:{id:"currentplayer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#currentplayer"}},[t._v("#")]),t._v(" currentPlayer")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentPlayer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v("\n")])])]),s("p",[t._v("Get the current player(s). Some games like 6nimmt can have multiple players that can play at the same time.")]),t._v(" "),s("p",[t._v("When the game is ended, the "),s("code",[t._v("currentPlayer")]),t._v(" can be "),s("code",[t._v("undefined")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"loglength"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loglength"}},[t._v("#")]),t._v(" logLength")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("logLength")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),t._v("\n")])])]),s("p",[t._v("Returns the length of the log of the game.")]),t._v(" "),s("p",[t._v("It is used to send log slices to the viewer, especially when executing a move, when we want to send only the new log items to the viewer.")]),t._v(" "),s("h3",{attrs:{id:"logslice"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logslice"}},[t._v("#")]),t._v(" logSlice")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("logSlice")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("player"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" start"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" end"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),t._v("\n")])])]),s("p",[t._v("Returns a log slice to be sent "),s("a",{attrs:{href:"#options-player"}},[t._v("player")]),t._v("'s viewer from "),s("a",{attrs:{href:"#options-start"}},[t._v("start")]),t._v(" to "),s("a",{attrs:{href:"#options-end"}},[t._v("end")]),t._v(" included.")]),t._v(" "),s("p",[t._v("The return value can have any structure. We recommend something like "),s("code",[t._v("{log: items[], availableMoves?: moves[]}")]),t._v(" to show the log and the available moves\nat the final state.")]),t._v(" "),s("h4",{attrs:{id:"options-player"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#options-player"}},[t._v("#")]),t._v(" options.player")]),t._v(" "),s("p",[t._v("The player to whom to send the log.")]),t._v(" "),s("p",[t._v("If "),s("code",[t._v("undefined")]),t._v(", it is to a spectator. Otherwise it corresponds to the player id of the player.")]),t._v(" "),s("p",[t._v("The secrets should be stripped from the log items, depending on who receives the log info. For example,\nin a card game, the spectators or other players should not see a player's card - unless the game is already ended.")]),t._v(" "),s("h4",{attrs:{id:"options-start"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#options-start"}},[t._v("#")]),t._v(" options.start")]),t._v(" "),s("p",[t._v("The beginning of the log slice.")]),t._v(" "),s("h4",{attrs:{id:"options-end"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#options-end"}},[t._v("#")]),t._v(" options.end")]),t._v(" "),s("p",[t._v("The end of the log slice. If "),s("code",[t._v("undefined")]),t._v(", it corresponds to the very end of the existing log.")]),t._v(" "),s("h2",{attrs:{id:"optional-methods"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#optional-methods"}},[t._v("#")]),t._v(" Optional methods")]),t._v(" "),s("h3",{attrs:{id:"setplayermetadata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setplayermetadata"}},[t._v("#")]),t._v(" setPlayerMetaData")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPlayerMetaData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" player"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" metaData"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData\n")])])]),s("p",[t._v("Set metadata on the player, from BGS.")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("name")]),t._v(": Name of the player")])]),t._v(" "),s("p",[t._v("Other metadata such as an avatar, clan name, ... could be given in the future.")]),t._v(" "),s("h3",{attrs:{id:"setplayersettings"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setplayersettings"}},[t._v("#")]),t._v(" setPlayerSettings")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPlayerSettings")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" player"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" settings"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("unknown")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData\n")])])]),s("p",[t._v("Update player settings - such as autocharge in Gaia Project.")]),t._v(" "),s("p",[t._v("Only update settings for the given keys. Other settings are left unchanged.")]),t._v(" "),s("h3",{attrs:{id:"playersettings"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#playersettings"}},[t._v("#")]),t._v(" playerSettings")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("playerSettings")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" player"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("unknown")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("Get player settings.")]),t._v(" "),s("h3",{attrs:{id:"rankings"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rankings"}},[t._v("#")]),t._v(" rankings")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rankings")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("Rankings for the players.")]),t._v(" "),s("p",[t._v("Only necessary if "),s("a",{attrs:{href:"#scores"}},[t._v("scores")]),t._v(" does not give enough information to rank the players. For example, if the player with the smallest score is the winner, or if there are tie-breaking conditions not reflected in the score.")]),t._v(" "),s("p",[t._v("The first player should be ranked "),s("code",[t._v("1")]),t._v(", the second player ranked "),s("code",[t._v("2")]),t._v(", ...")]),t._v(" "),s("p",[t._v("If there are ties, just give the same ranking.")]),t._v(" "),s("h3",{attrs:{id:"round"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#round"}},[t._v("#")]),t._v(" round")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("round")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v("\n")])])]),s("p",[t._v("The current round in the game.")]),t._v(" "),s("p",[t._v("It is shown in the game listings, and used for statistic purposes.")]),t._v(" "),s("h3",{attrs:{id:"cancelled"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cancelled"}},[t._v("#")]),t._v(" cancelled")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancelled")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),t._v("\n")])])]),s("p",[t._v("Returns true if the game is cancelled. For example if a player drops out too early in the game, during faction selection.")]),t._v(" "),s("p",[t._v("Note that this is probably going to be deprecated. It can complicate things for tournaments, ...")]),t._v(" "),s("h3",{attrs:{id:"factions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#factions"}},[t._v("#")]),t._v(" factions")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("factions")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Array")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("Return the faction of each player, if applicable.")]),t._v(" "),s("p",[t._v("Used for thumbnails in game lists and sidebar - images can be defined for each faction.")]),t._v(" "),s("p",[t._v("Also used for statistics.")]),t._v(" "),s("h3",{attrs:{id:"stripsecret"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stripsecret"}},[t._v("#")]),t._v(" stripSecret")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stripSecret")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" player"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("Middleware to process data to be sent to a player's viewer, strip secrets if needed.")]),t._v(" "),s("p",[t._v("In case of a spectator, "),s("code",[t._v("player")]),t._v(" is undefined.")]),t._v(" "),s("h3",{attrs:{id:"tosave"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tosave"}},[t._v("#")]),t._v(" toSave")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toSave")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v("\n")])])]),s("p",[t._v("Middleware to process data to be stored in the database.")]),t._v(" "),s("p",[t._v("Return "),s("code",[t._v("undefined")]),t._v(" to NOT store the data. It can happen for example\nwhen a player executes a move without confirming it, a dry run so to speak.")]),t._v(" "),s("h3",{attrs:{id:"messages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#messages"}},[t._v("#")]),t._v(" messages")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("messages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("messages"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Important messages / game events to show in the game's chat.")]),t._v(" "),s("p",[s("code",[t._v("data")]),t._v(" should be modified so that a subsequent call does not show the same messages.")]),t._v(" "),s("h3",{attrs:{id:"replay"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#replay"}},[t._v("#")]),t._v(" replay")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replay")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData\n")])])]),s("p",[t._v("Replays a game.")]),t._v(" "),s("p",[t._v("It can be called after the database is manually edited, or the game engine is updated.")]),t._v(" "),s("p",[s("code",[t._v("to")]),t._v(" is optional and means replaying to that move, e.g. "),s("code",[t._v("replay(data, {to: 1})")]),t._v(" will only redo the first move, and\nthe rest of the moves will not be played.")]),t._v(" "),s("h3",{attrs:{id:"stats"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stats"}},[t._v("#")]),t._v(" stats")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stats")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" GameData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Many"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>>")]),t._v("\n")])])]),s("p",[t._v("Gets stats on a game, to be used to write to CSV. The "),s("code",[t._v("Many")]),t._v(" type is "),s("code",[t._v("type Many<T> = T | T[]")]),t._v(".")]),t._v(" "),s("p",[t._v("For example, here is what it could return for "),s("em",[t._v("one")]),t._v(" game:")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  basic"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    point"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("120")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    turns"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  detailed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    player"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    boosters"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    turns"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("120")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    player"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    boosters"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    turns"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Here two CSVs would be generated, "),s("code",[t._v("basic.csv")]),t._v(" and "),s("code",[t._v("detailed.csv")]),t._v(".")])])}),[],!1,null,null,null);a.default=r.exports}}]);