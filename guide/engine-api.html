<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Game engine API | BGS Docs</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="Docs for the boardgamers ecosystem">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.1a7c2cde.css" as="style"><link rel="preload" href="/assets/js/app.8738e81d.js" as="script"><link rel="preload" href="/assets/js/2.c1db7db4.js" as="script"><link rel="preload" href="/assets/js/14.ffe354e4.js" as="script"><link rel="prefetch" href="/assets/js/10.5adc3d87.js"><link rel="prefetch" href="/assets/js/11.eedeb113.js"><link rel="prefetch" href="/assets/js/12.03941954.js"><link rel="prefetch" href="/assets/js/13.5d61c519.js"><link rel="prefetch" href="/assets/js/15.9f1b0f27.js"><link rel="prefetch" href="/assets/js/16.d9bd5205.js"><link rel="prefetch" href="/assets/js/3.78112e14.js"><link rel="prefetch" href="/assets/js/4.385703a5.js"><link rel="prefetch" href="/assets/js/5.e8626f18.js"><link rel="prefetch" href="/assets/js/6.db8ede9f.js"><link rel="prefetch" href="/assets/js/7.0df212ed.js"><link rel="prefetch" href="/assets/js/8.c3f7b666.js"><link rel="prefetch" href="/assets/js/9.855fed56.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1a7c2cde.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">BGS Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://github.com/boardgamers" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://github.com/boardgamers" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/guide/architecture.html" class="sidebar-link">Architecture</a></li><li><a href="/guide/engine-api.html" aria-current="page" class="active sidebar-link">Game engine API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/engine-api.html#required-methods" class="sidebar-link">Required methods</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/engine-api.html#init" class="sidebar-link">init</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#move" class="sidebar-link">move</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#ended" class="sidebar-link">ended</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#scores" class="sidebar-link">scores</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#dropplayer" class="sidebar-link">dropPlayer</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#currentplayer" class="sidebar-link">currentPlayer</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#loglength" class="sidebar-link">logLength</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#logslice" class="sidebar-link">logSlice</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#optional-methods" class="sidebar-link">Optional methods</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/engine-api.html#setplayermetadata" class="sidebar-link">setPlayerMetaData</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#setplayersettings" class="sidebar-link">setPlayerSettings</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#playersettings" class="sidebar-link">playerSettings</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#rankings" class="sidebar-link">rankings</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#round" class="sidebar-link">round</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#cancelled" class="sidebar-link">cancelled</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#factions" class="sidebar-link">factions</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#stripsecret" class="sidebar-link">stripSecret</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#tosave" class="sidebar-link">toSave</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#messages" class="sidebar-link">messages</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#replay" class="sidebar-link">replay</a></li><li class="sidebar-sub-header"><a href="/guide/engine-api.html#stats" class="sidebar-link">stats</a></li></ul></li></ul></li><li><a href="/guide/viewer-api.html" class="sidebar-link">Viewer API</a></li><li><a href="/guide/tictactoe.html" class="sidebar-link">Tic Tac Toe example</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="game-engine-api"><a href="#game-engine-api" class="header-anchor">#</a> Game engine API</h1> <p>Your game engine should be a NPM module and export a number of methods.</p> <p>Most of the methods return <code>GameData</code>, the game state. You can alter the <code>GameData</code>
passed in the argument and return, or return a whole new object.</p> <p></p><div class="table-of-contents"><ul><li><a href="#required-methods">Required methods</a><ul><li><a href="#init">init</a></li><li><a href="#move">move</a></li><li><a href="#ended">ended</a></li><li><a href="#scores">scores</a></li><li><a href="#dropplayer">dropPlayer</a></li><li><a href="#currentplayer">currentPlayer</a></li><li><a href="#loglength">logLength</a></li><li><a href="#logslice">logSlice</a></li></ul></li><li><a href="#optional-methods">Optional methods</a><ul><li><a href="#setplayermetadata">setPlayerMetaData</a></li><li><a href="#setplayersettings">setPlayerSettings</a></li><li><a href="#playersettings">playerSettings</a></li><li><a href="#rankings">rankings</a></li><li><a href="#round">round</a></li><li><a href="#cancelled">cancelled</a></li><li><a href="#factions">factions</a></li><li><a href="#stripsecret">stripSecret</a></li><li><a href="#tosave">toSave</a></li><li><a href="#messages">messages</a></li><li><a href="#replay">replay</a></li><li><a href="#stats">stats</a></li></ul></li></ul></div><p></p> <h2 id="required-methods"><a href="#required-methods" class="header-anchor">#</a> Required methods</h2> <h3 id="init"><a href="#init" class="header-anchor">#</a> init</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">init</span> <span class="token punctuation">(</span>players<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> expansions<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> seed<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> creator<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>GameData<span class="token operator">&gt;</span>
</code></pre></div><p>Creates the initial game data. The function can be asynchronous - if you need to make an API call to an external
tool like a map generator, for example.</p> <p>After initialization, the players are 0-indexed: a 4 player games will have players <code>0</code>, <code>1</code>, <code>2</code> and <code>3</code>.</p> <p><code>creator</code> is the index of the player that created the game. It can be <code>undefined</code> if the creator of the game is not a player.</p> <h4 id="players"><a href="#players" class="header-anchor">#</a> players</h4> <p>The number of players</p> <h4 id="expansions"><a href="#expansions" class="header-anchor">#</a> expansions</h4> <p>The list of expansions activated</p> <h4 id="options"><a href="#options" class="header-anchor">#</a> options</h4> <p>An object containing the options chosen for the game</p> <h4 id="seed"><a href="#seed" class="header-anchor">#</a> seed</h4> <p>The random seed for the game. Games with the same seed should always produce the same random results (map generation, card shuffling, dice throws...).</p> <h3 id="move"><a href="#move" class="header-anchor">#</a> move</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">move</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">,</span> move<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> player<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> GameData
</code></pre></div><p>Execute a move by <code>player</code>.</p> <p>Throw an error if the move is invalid.</p> <p>Note that if you implement <a href="#tosave">toSave</a> to not save the result, you can send the result to the UI without storing the modified game state in the database. It is useful when you want to allow the user to play around and only confirm at the very end.</p> <h3 id="ended"><a href="#ended" class="header-anchor">#</a> ended</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">ended</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
</code></pre></div><p>Returns whether or not the game is ended.</p> <h3 id="scores"><a href="#scores" class="header-anchor">#</a> scores</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">scores</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><p>Give the score of each player. The scores are displayed in the sidebar next to player games. They are also used to determine
the player ranking at the end for elo calculation, unless <a href="#ranking">ranking</a> is implemented.</p> <h3 id="dropplayer"><a href="#dropplayer" class="header-anchor">#</a> dropPlayer</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropPlayer</span><span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">,</span> player<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>GameData<span class="token operator">&gt;</span>
</code></pre></div><p>Drop a player out.</p> <p>You should either change the player to an AI or completely remove them from the game. If it is
the current player, the turn should automatically go to the next, non dropped-player.</p> <h3 id="currentplayer"><a href="#currentplayer" class="header-anchor">#</a> currentPlayer</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">currentPlayer</span><span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
</code></pre></div><p>Get the current player(s). Some games like 6nimmt can have multiple players that can play at the same time.</p> <p>When the game is ended, the <code>currentPlayer</code> can be <code>undefined</code>.</p> <h3 id="loglength"><a href="#loglength" class="header-anchor">#</a> logLength</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">logLength</span><span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
</code></pre></div><p>Returns the length of the log of the game.</p> <p>It is used to send log slices to the viewer, especially when executing a move, when we want to send only the new log items to the viewer.</p> <h3 id="logslice"><a href="#logslice" class="header-anchor">#</a> logSlice</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">logSlice</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span>player<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> end<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span>
</code></pre></div><p>Returns a log slice to be sent <a href="#options-player">player</a>'s viewer from <a href="#options-start">start</a> to <a href="#options-end">end</a> included.</p> <p>The return value can have any structure. We recommend something like <code>{log: items[], availableMoves?: moves[]}</code> to show the log and the available moves
at the final state.</p> <h4 id="options-player"><a href="#options-player" class="header-anchor">#</a> options.player</h4> <p>The player to whom to send the log.</p> <p>If <code>undefined</code>, it is to a spectator. Otherwise it corresponds to the player id of the player.</p> <p>The secrets should be stripped from the log items, depending on who receives the log info. For example,
in a card game, the spectators or other players should not see a player's card - unless the game is already ended.</p> <h4 id="options-start"><a href="#options-start" class="header-anchor">#</a> options.start</h4> <p>The beginning of the log slice.</p> <h4 id="options-end"><a href="#options-end" class="header-anchor">#</a> options.end</h4> <p>The end of the log slice. If <code>undefined</code>, it corresponds to the very end of the existing log.</p> <h2 id="optional-methods"><a href="#optional-methods" class="header-anchor">#</a> Optional methods</h2> <h3 id="setplayermetadata"><a href="#setplayermetadata" class="header-anchor">#</a> setPlayerMetaData</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">setPlayerMetaData</span><span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">,</span> player<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> metaData<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> GameData
</code></pre></div><p>Set metadata on the player, from BGS.</p> <ul><li><code>name</code>: Name of the player</li></ul> <p>Other metadata such as an avatar, clan name, ... could be given in the future.</p> <h3 id="setplayersettings"><a href="#setplayersettings" class="header-anchor">#</a> setPlayerSettings</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">setPlayerSettings</span><span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">,</span> player<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> settings<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> GameData
</code></pre></div><p>Update player settings - such as autocharge in Gaia Project.</p> <p>Only update settings for the given keys. Other settings are left unchanged.</p> <h3 id="playersettings"><a href="#playersettings" class="header-anchor">#</a> playerSettings</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">playerSettings</span><span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">,</span> player<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span>
</code></pre></div><p>Get player settings.</p> <h3 id="rankings"><a href="#rankings" class="header-anchor">#</a> rankings</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">rankings</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><p>Rankings for the players.</p> <p>Only necessary if <a href="#scores">scores</a> does not give enough information to rank the players. For example, if the player with the smallest score is the winner, or if there are tie-breaking conditions not reflected in the score.</p> <p>The first player should be ranked <code>1</code>, the second player ranked <code>2</code>, ...</p> <p>If there are ties, just give the same ranking.</p> <h3 id="round"><a href="#round" class="header-anchor">#</a> round</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">round</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
</code></pre></div><p>The current round in the game.</p> <p>It is shown in the game listings, and used for statistic purposes.</p> <h3 id="cancelled"><a href="#cancelled" class="header-anchor">#</a> cancelled</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">cancelled</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
</code></pre></div><p>Returns true if the game is cancelled. For example if a player drops out too early in the game, during faction selection.</p> <p>Note that this is probably going to be deprecated. It can complicate things for tournaments, ...</p> <h3 id="factions"><a href="#factions" class="header-anchor">#</a> factions</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">factions</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token operator">&gt;</span>
</code></pre></div><p>Return the faction of each player, if applicable.</p> <p>Used for thumbnails in game lists and sidebar - images can be defined for each faction.</p> <p>Also used for statistics.</p> <h3 id="stripsecret"><a href="#stripsecret" class="header-anchor">#</a> stripSecret</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">stripSecret</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">,</span> player<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
</code></pre></div><p>Middleware to process data to be sent to a player's viewer, strip secrets if needed.</p> <p>In case of a spectator, <code>player</code> is undefined.</p> <h3 id="tosave"><a href="#tosave" class="header-anchor">#</a> toSave</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">toSave</span><span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
</code></pre></div><p>Middleware to process data to be stored in the database.</p> <p>Return <code>undefined</code> to NOT store the data. It can happen for example
when a player executes a move without confirming it, a dry run so to speak.</p> <h3 id="messages"><a href="#messages" class="header-anchor">#</a> messages</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">messages</span><span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span>messages<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token operator">:</span> GameData<span class="token punctuation">}</span>
</code></pre></div><p>Important messages / game events to show in the game's chat.</p> <p><code>data</code> should be modified so that a subsequent call does not show the same messages.</p> <h3 id="replay"><a href="#replay" class="header-anchor">#</a> replay</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">replay</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span> to<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> GameData
</code></pre></div><p>Replays a game.</p> <p>It can be called after the database is manually edited, or the game engine is updated.</p> <p><code>to</code> is optional and means replaying to that move, e.g. <code>replay(data, {to: 1})</code> will only redo the first move, and
the rest of the moves will not be played.</p> <h3 id="stats"><a href="#stats" class="header-anchor">#</a> stats</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">stats</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> GameData<span class="token punctuation">)</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> Many<span class="token operator">&lt;</span>Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token operator">&gt;&gt;&gt;</span>
</code></pre></div><p>Gets stats on a game, to be used to write to CSV. The <code>Many</code> type is <code>type Many&lt;T&gt; = T | T[]</code>.</p> <p>For example, here is what it could return for <em>one</em> game:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  basic<span class="token operator">:</span> <span class="token punctuation">{</span>
    point<span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
    turns<span class="token operator">:</span> <span class="token number">500</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  detailed<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    player<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    boosters<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    turns<span class="token operator">:</span> <span class="token number">120</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    player<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    boosters<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
    turns<span class="token operator">:</span> <span class="token number">100</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Here two CSVs would be generated, <code>basic.csv</code> and <code>detailed.csv</code>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/architecture.html" class="prev">
        Architecture
      </a></span> <span class="next"><a href="/guide/viewer-api.html">
        Viewer API
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.8738e81d.js" defer></script><script src="/assets/js/2.c1db7db4.js" defer></script><script src="/assets/js/14.ffe354e4.js" defer></script>
  </body>
</html>
